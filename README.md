# Clean Architecture — основные правила

## 1. Правило зависимостей
Зависимости направлены только внутрь:

presentation → application → domain  
infrastructure → application / domain (через интерфейсы)

❌ Внутренние слои не знают о внешних.

---

## 2. Domain — центр системы
Содержит:
- бизнес-модели
- бизнес-правила
- инварианты
- доменные сервисы
- интерфейсы репозиториев (при необходимости)

Domain:
- не знает о БД
- не знает об HTTP
- не знает о фреймворках
- не импортирует infrastructure

---

## 3. Application — use cases
Отвечает за:
- реализацию сценариев (use case)
- координацию домена
- работу через интерфейсы (порты)

Не содержит технических деталей.

---

## 4. Infrastructure — детали реализации
Содержит:
- БД
- HTTP
- cookies
- внешние API
- фреймворки
- реализации интерфейсов

Это заменяемый слой.

---

## 5. Presentation — вход и выход
Содержит:
- controllers
- mappers, не связанные с бд и бизнес-логикой
- request/response DTO

Не содержит бизнес-логики.

---

## 6. Инверсия зависимостей (DIP)
Интерфейсы объявляются во внутренних слоях.  
Реализации — во внешних.

Application зависит от абстракций, а не от конкретных классов.

---

## 7. Границы через маппинг
Не передавать между слоями:
- framework-классы
- JPA entity
- HTTP DTO

Всегда использовать преобразование моделей.

---

## 8. Тестируемость
- Domain тестируется без фреймворков.
- Use case тестируется без БД.
- Infrastructure можно заменить без изменения бизнес-логики.

---

## Главный принцип

Бизнес-логика в центре.  
Фреймворки и технологии — детали.
